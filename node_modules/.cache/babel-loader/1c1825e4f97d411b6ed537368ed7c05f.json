{"ast":null,"code":"var _jsxFileName = \"/Volumes/Learning/Learning/Web-Development/projects/Assignment-11/client/src/components/Login/PrivateRoute/PrivateRoute.js\",\n    _s = $RefreshSig$();\n\nimport React, { useContext } from 'react';\nimport { Redirect, Route } from 'react-router';\nimport jwt_decode from \"jwt-decode\";\nimport { userContext } from '../../../App';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nconst PrivateRoute = ({\n  children,\n  ...rest\n}) => {\n  _s();\n\n  const [signInUser, setSignInUser] = useContext(userContext);\n\n  const isLoggedIn = () => {\n    const token = sessionStorage.getItem('token');\n\n    if (!token) {\n      return false;\n    }\n\n    const decodedToken = jwt_decode(token);\n    const currentTime = new Date().getTime() / 1000;\n    return decodedToken.exp > currentTime;\n  };\n\n  return /*#__PURE__*/_jsxDEV(Route, { ...rest,\n    render: ({\n      location\n    }) => signInUser.email || isLoggedIn() ? children : /*#__PURE__*/_jsxDEV(Redirect, {\n      to: {\n        pathname: \"/login\",\n        state: {\n          from: location\n        }\n      }\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 25,\n      columnNumber: 13\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 19,\n    columnNumber: 9\n  }, this);\n};\n\n_s(PrivateRoute, \"LyjLPNKEqZKon7+cJMus6aeHEJI=\");\n\n_c = PrivateRoute;\nexport default PrivateRoute;\n\nvar _c;\n\n$RefreshReg$(_c, \"PrivateRoute\");","map":{"version":3,"sources":["/Volumes/Learning/Learning/Web-Development/projects/Assignment-11/client/src/components/Login/PrivateRoute/PrivateRoute.js"],"names":["React","useContext","Redirect","Route","jwt_decode","userContext","PrivateRoute","children","rest","signInUser","setSignInUser","isLoggedIn","token","sessionStorage","getItem","decodedToken","currentTime","Date","getTime","exp","location","email","pathname","state","from"],"mappings":";;;AAAA,OAAOA,KAAP,IAAgBC,UAAhB,QAAkC,OAAlC;AACA,SAASC,QAAT,EAAmBC,KAAnB,QAAgC,cAAhC;AACA,OAAOC,UAAP,MAAuB,YAAvB;AACA,SAASC,WAAT,QAA4B,cAA5B;;;AAEA,MAAMC,YAAY,GAAG,CAAC;AAAEC,EAAAA,QAAF;AAAY,KAAGC;AAAf,CAAD,KAA2B;AAAA;;AAC5C,QAAM,CAACC,UAAD,EAAYC,aAAZ,IAA2BT,UAAU,CAACI,WAAD,CAA3C;;AAEA,QAAMM,UAAU,GAAG,MAAM;AACrB,UAAMC,KAAK,GAAGC,cAAc,CAACC,OAAf,CAAuB,OAAvB,CAAd;;AACA,QAAG,CAACF,KAAJ,EAAU;AACR,aAAO,KAAP;AACD;;AACD,UAAMG,YAAY,GAAGX,UAAU,CAACQ,KAAD,CAA/B;AACA,UAAMI,WAAW,GAAG,IAAIC,IAAJ,GAAWC,OAAX,KAAuB,IAA3C;AACA,WAAOH,YAAY,CAACI,GAAb,GAAmBH,WAA1B;AACD,GARH;;AASA,sBACI,QAAC,KAAD,OACIR,IADJ;AAEA,IAAA,MAAM,EAAE,CAAC;AAAEY,MAAAA;AAAF,KAAD,KACLX,UAAU,CAACY,KAAX,IAAoBV,UAAU,EAA/B,GACEJ,QADF,gBAGE,QAAC,QAAD;AACE,MAAA,EAAE,EAAE;AACFe,QAAAA,QAAQ,EAAE,QADR;AAEFC,QAAAA,KAAK,EAAE;AAAEC,UAAAA,IAAI,EAAEJ;AAAR;AAFL;AADN;AAAA;AAAA;AAAA;AAAA;AANJ;AAAA;AAAA;AAAA;AAAA,UADJ;AAiBH,CA7BD;;GAAMd,Y;;KAAAA,Y;AA+BN,eAAeA,YAAf","sourcesContent":["import React, { useContext } from 'react';\nimport { Redirect, Route } from 'react-router';\nimport jwt_decode from \"jwt-decode\";\nimport { userContext } from '../../../App';\n\nconst PrivateRoute = ({ children, ...rest }) => {\n    const [signInUser,setSignInUser]=useContext(userContext);\n    \n    const isLoggedIn = () => {\n        const token = sessionStorage.getItem('token');\n        if(!token){\n          return false;\n        }\n        const decodedToken = jwt_decode(token);\n        const currentTime = new Date().getTime() / 1000;\n        return decodedToken.exp > currentTime;\n      }\n    return (\n        <Route\n        {...rest}\n        render={({ location }) =>\n          (signInUser.email || isLoggedIn()) ? (\n            children\n          ) : (\n            <Redirect\n              to={{\n                pathname: \"/login\",\n                state: { from: location }\n              }}\n            />\n          )\n        }\n      />\n    );\n};\n\nexport default PrivateRoute;"]},"metadata":{},"sourceType":"module"}